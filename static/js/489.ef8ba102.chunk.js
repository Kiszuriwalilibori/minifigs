"use strict";(self.webpackChunkminifigs=self.webpackChunkminifigs||[]).push([[489],{5489:function(e,r,s){s.r(r),s.d(r,{default:function(){return B}});var t=s(8687),a=s(3329),i=function(e){var r=e.message;return(0,a.jsx)("article",{className:"error",children:(0,a.jsxs)("div",{className:"message",children:[(0,a.jsx)("p",{className:"message__general-message",children:"Hi, \ud83d\ude00"}),(0,a.jsx)("hr",{}),(0,a.jsx)("div",{className:"message__error-message",children:r||""})]})})},n=s(2791),d=n.memo((function(){return(0,a.jsx)("div",{children:"It seems that Dementors sucked all the parts \ud83d\ude29"})})),l=s(1413),c=s(5290),m=s(7689),u="minifigs-ordr-form-id",p=s(1536),o=s(4383),x="Minimal length not reached, should be at least ",h="Max length exceeded ",f="This field is required ",j="Text does not meet country pattern ",y={minLength:2,maxLength:45,pattern:/^([ \u00c0-\u01ffa-zA-Z'\-])+$/,required:!0},g={required:!0,minLength:2,maxLength:100,pattern:/^([ \u00c0-\u01ffa-zA-Z'\-])+$/},N={required:!0,pattern:/(?:(?:(?:\+|00)?48)|(?:\(\+?48\)))?(?:1[2-8]|2[2-69]|3[2-49]|4[1-8]|5[0-9]|6[0-35-9]|[7-8][1-9]|9[145])\d{7}/},v={required:!0,pattern:/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/},b={required:!1,pattern:/^\d{4}\-(0?[1-9]|1[012])\-(0?[1-9]|[12][0-9]|3[01])$/},q={required:!0,pattern:/[A-Za-z0-9'\.\-\s\,]/},_={required:!0,minLength:2,pattern:/^([ \u00c0-\u01ffa-zA-Z'\-])+$/},Z={required:!0,minLength:2,pattern:/^([ \u00c0-\u01ffa-zA-Z'\-])+$/},z={pattern:/^[0-9]{2}-[0-9]{3}/,required:!0},L={firstName:(0,l.Z)({},y),surName:(0,l.Z)({},g),phone:(0,l.Z)({},N),email:(0,l.Z)({},v),dob:(0,l.Z)({},b),address:(0,l.Z)({},q),city:(0,l.Z)({},_),state:(0,l.Z)({},Z),zip:(0,l.Z)({},z)},w=s(5861),M=s(4687),E=s.n(M),S=s(7721),k=(0,t.$j)(null,(function(e){return{sendOrder:function(r,s){return e(function(e,r){return function(){var s=(0,w.Z)(E().mark((function s(t,a){return E().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(r),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(r){if(r)try{t((0,S.showMessage)({isMessage:!0,anyMessage:"Your order has been successfully proceeded"})),setTimeout(e.intro,5e3),setTimeout(S.hideMessage,5e3)}catch(s){t((0,S.showError)({isError:!0,errorMessage:"Error occured during order placing"}))}else t((0,S.showError)({isError:!0,errorMessage:"Empty data received from receiver's endpoint"}))})).catch((function(e){var r={isError:!0,errorMessage:e.message};t((0,S.showError)(r))}));case 1:case"end":return s.stop()}}),s)})));return function(e,r){return s.apply(this,arguments)}}()}(r,s))}}}))((function(e){var r=e.sendOrder,s=(0,t.v9)(o.eW),i=(0,m.s0)(),d=(0,n.useRef)(null),b=(0,n.useMemo)((0,p.bI)(i),[]),w=(0,c.cI)(),M=w.register,E=w.handleSubmit,S=w.formState.errors;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("form",{className:"details",id:u,onSubmit:E((function(){var e=new FormData(d.current);e.append("setNumber",s),e&&r(b,e)})),ref:d,children:[(0,a.jsx)("h1",{className:"fromLeft",children:"Shipping details"}),(0,a.jsx)("div",{className:"foo",id:"foo"}),(0,a.jsxs)("div",{className:"form-item extendable",children:[(0,a.jsx)("label",{className:"required",htmlFor:"firstName",children:"Name"}),(0,a.jsx)("input",(0,l.Z)((0,l.Z)({type:"text"},M("firstName",L.firstName)),{},{id:"firstName"})),S.firstName&&"required"===S.firstName.type&&(0,a.jsx)("span",{children:f}),S.firstName&&"minLength"===S.firstName.type&&(0,a.jsxs)("span",{children:[x,y.minLength]}),S.firstName&&"maxLength"===S.firstName.type&&(0,a.jsxs)("span",{children:[h,y.maxLength]}),S.firstName&&"pattern"===S.firstName.type&&(0,a.jsx)("span",{children:j})]}),(0,a.jsxs)("div",{className:"form-item extendable",children:[(0,a.jsx)("label",{className:"required",htmlFor:"Surname",children:"Surname"}),(0,a.jsx)("input",(0,l.Z)({id:"Surname",type:"text"},M("surName",L.surName))),S.surName&&"required"===S.surName.type&&(0,a.jsxs)("span",{children:[f,g.required]}),S.surName&&"minLength"===S.surName.type&&(0,a.jsxs)("span",{children:[x,g.minLength]}),S.surName&&"maxLength"===S.surName.type&&(0,a.jsxs)("span",{children:[h,g.maxLength]}),S.surName&&"pattern"===S.surName.type&&(0,a.jsx)("span",{children:j})]}),(0,a.jsxs)("div",{className:"form-item full-width",children:[(0,a.jsx)("label",{className:"required",children:"Phone Number"}),(0,a.jsx)("input",(0,l.Z)({placeholder:"Mobile or regular Polish phone with country code like 048 669086566",type:"text"},M("phone",L.phone))),S.phone&&"required"===S.phone.type&&(0,a.jsxs)("span",{children:[f,N.required]}),S.phone&&"pattern"===S.phone.type&&(0,a.jsx)("span",{children:j})]}),(0,a.jsxs)("div",{className:"form-item full-width",children:[(0,a.jsx)("label",{className:"required",htmlFor:"email",children:"Email"}),(0,a.jsx)("input",(0,l.Z)({id:"email",type:"text"},M("email",L.email))),S.email&&"required"===S.email.type&&(0,a.jsxs)("span",{children:[f,v.required]}),S.email&&"pattern"===S.email.type&&(0,a.jsx)("span",{children:j})]}),(0,a.jsxs)("div",{className:"form-item full-width",children:[(0,a.jsx)("label",{children:"Date of Birth"}),(0,a.jsx)("input",(0,l.Z)({placeholder:"Date in yyyy-mm-dd or yyyy-m-dd format ",type:"text"},M("dob",L.dob))),S.dob&&"pattern"===S.dob.type&&(0,a.jsx)("span",{children:j})]}),(0,a.jsxs)("div",{className:"form-item full-width",children:[(0,a.jsx)("label",{className:"required",htmlFor:"address",children:"Address"}),(0,a.jsx)("input",(0,l.Z)({type:"text",id:"address"},M("address",L.address))),S.address&&"required"===S.address.type&&(0,a.jsxs)("span",{children:[f,q.required]}),S.address&&"pattern"===S.address.type&&(0,a.jsx)("span",{children:j})]}),(0,a.jsxs)("div",{className:"form-item full-width",children:[(0,a.jsx)("label",{className:"required",htmlFor:"city",children:"City"}),(0,a.jsx)("input",(0,l.Z)({type:"text",id:"city"},M("city",L.city))),S.city&&"required"===S.city.type&&(0,a.jsxs)("span",{children:[f,Z.required]}),S.city&&"pattern"===S.city.type&&(0,a.jsx)("span",{children:j}),S.city&&"minLength"===S.city.type&&(0,a.jsxs)("span",{children:[x,_.minLength]})]}),(0,a.jsxs)("div",{className:"form-item",children:[(0,a.jsx)("label",{className:"required",htmlFor:"state",children:"State"}),(0,a.jsx)("input",(0,l.Z)({type:"text",id:"state"},M("state",L.state))),S.state&&"required"===S.state.type&&(0,a.jsxs)("span",{children:[f,Z.required]}),S.state&&"pattern"===S.state.type&&(0,a.jsx)("span",{children:j}),S.state&&"minLength"===S.state.type&&(0,a.jsxs)("span",{children:[x,Z.minLength]})]}),(0,a.jsxs)("div",{className:"form-item",children:[(0,a.jsx)("label",{className:"required",children:"Zip Code"}),(0,a.jsx)("input",(0,l.Z)({type:"text",placeholder:" zip code in format xx-xxx"},M("zip",L.zip))),S.zip&&"required"===S.zip.type&&(0,a.jsxs)("span",{children:[f,z.required]}),S.zip&&"pattern"===S.zip.type&&(0,a.jsx)("span",{children:j})]})]})})})),F=function(e){var r=e.data,s=e.loadHandler;return(0,a.jsxs)("div",{className:"part",children:[(0,a.jsx)("img",{className:"part__image",src:r.part.part_img_url,alt:"Picture of "+r.part.name,onLoad:s,onError:s}),(0,a.jsxs)("div",{className:"part__text-items",children:[(0,a.jsx)("div",{className:"part__item part__name",children:r.part.name}),(0,a.jsx)("a",{className:"part__item part__code",href:r.part.part_img_url,target:"blank",children:r.part.part_num})]})]})},$=s(6666),T=s.n($),A=s(763),C=s(1092),D=s(9874),I=function(){var e=(0,t.v9)(o.eW),r=(0,D.B)(e,{skip:(0,p.s9)()}),s=r.data,i=r.isFetching,l=r.isError,c=(0,n.useRef)(null),m=s?(0,A.after)(s.length,(function(){var e;null===(e=c.current)||void 0===e||e.classList.add("active")})):function(){};return i?(0,a.jsx)(C.TF,{}):l?(0,a.jsx)(d,{}):s&&!(0,A.isEmpty)(s)?(0,a.jsx)("div",{className:"parts",ref:c,children:s.map((function(e){return(0,a.jsx)(F,{data:e,loadHandler:m},T()())}))}):(0,a.jsx)(d,{})},O=function(){var e=(0,t.v9)(o.jX),r=e.name,s=e.num_parts,i=e.set_img_url,n="There are ".concat(s," parts in this minifig:");return(0,a.jsxs)("div",{className:"summary__main items",children:[(0,a.jsx)("h2",{className:"black fromLeft",children:"Summary"}),(0,a.jsxs)("div",{className:"image image--no-padding",children:[r&&i&&(0,a.jsx)(C.t,{name:r,url:i}),r&&(0,a.jsx)(C.VG,{text:r})]}),s&&(0,a.jsx)("p",{children:n})]})},P=function(){return(0,a.jsxs)("div",{className:"summary",children:[(0,a.jsx)(O,{}),(0,a.jsx)(I,{}),(0,a.jsx)(C.kD,{className:"button uppercased",type:"submit",form:u,children:"Submit"})]})},H=function(e){var r=e.isMessage,s=e.message;return(0,p.s9)()?(0,a.jsx)(i,{message:"No Internet Connection, try again some later"}):(0,a.jsxs)("main",{className:"order",children:[(0,a.jsx)(k,{}),(0,a.jsx)(P,{}),r&&(0,a.jsx)(i,{message:s})]})},B=(0,t.$j)((function(e){return{message:e.fetch.anyMessage,isMessage:e.fetch.isMessage}}),{})(H)}}]);
//# sourceMappingURL=489.ef8ba102.chunk.js.map