"use strict";(self.webpackChunkminifigs=self.webpackChunkminifigs||[]).push([[489],{5489:function(e,r,s){s.r(r),s.d(r,{default:function(){return H}});var t=s(8687),a=s(3329),i=function(e){var r=e.message;return(0,a.jsx)("article",{className:"error",children:(0,a.jsxs)("div",{className:"message",children:[(0,a.jsx)("p",{className:"message__general-message",children:"Hi, \ud83d\ude00"}),(0,a.jsx)("hr",{}),(0,a.jsx)("div",{className:"message__error-message",children:r||""})]})})},n=s(2791),d=n.memo((function(){return(0,a.jsx)("div",{children:"It seems that Dementors sucked all the parts \ud83d\ude29"})})),l=s(1413),m=s(5290),c=s(7689),u="minifigs-ordr-form-id",o=s(1536),p=s(4383),h="Minimal length not reached, should be at least ",x="Max length exceeded ",f="This field is required ",j="Text does not meet country pattern ",y={minLength:2,maxLength:45,pattern:/^([ \u00c0-\u01ffa-zA-Z'\-])+$/,required:!0},g={required:!0,minLength:2,maxLength:100,pattern:/^([ \u00c0-\u01ffa-zA-Z'\-])+$/},N={required:!0,pattern:/(?:(?:(?:\+|00)?48)|(?:\(\+?48\)))?(?:1[2-8]|2[2-69]|3[2-49]|4[1-8]|5[0-9]|6[0-35-9]|[7-8][1-9]|9[145])\d{7}/},v={required:!0,pattern:/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/},b={required:!1,pattern:/^\d{4}\-(0?[1-9]|1[012])\-(0?[1-9]|[12][0-9]|3[01])$/},q={required:!0,pattern:/[A-Za-z0-9'\.\-\s\,]/},Z={required:!0,minLength:2,pattern:/^([ \u00c0-\u01ffa-zA-Z'\-])+$/},_={required:!0,minLength:2,pattern:/^([ \u00c0-\u01ffa-zA-Z'\-])+$/},z={pattern:/^[0-9]{2}-[0-9]{3}/,required:!0},L={firstName:(0,l.Z)({},y),surName:(0,l.Z)({},g),phone:(0,l.Z)({},N),email:(0,l.Z)({},v),dob:(0,l.Z)({},b),address:(0,l.Z)({},q),city:(0,l.Z)({},Z),state:(0,l.Z)({},_),zip:(0,l.Z)({},z)},w=s(5861),M=s(4687),F=s.n(M),E=s(7721),S=(0,t.$j)(null,(function(e){return{sendOrder:function(r,s){return e(function(e,r){return function(){var s=(0,w.Z)(F().mark((function s(t,a){return F().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(r),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(r){if(r)try{t((0,E.showMessage)({isMessage:!0,anyMessage:"Your order has been successfully proceeded"})),setTimeout(e.intro,5e3),setTimeout(E.hideMessage,5e3)}catch(s){t((0,E.showError)({isError:!0,errorMessage:"Error occured during order placing"}))}else t((0,E.showError)({isError:!0,errorMessage:"Empty data received from receiver's endpoint"}))})).catch((function(e){var r={isError:!0,errorMessage:e.message};t((0,E.showError)(r))}));case 1:case"end":return s.stop()}}),s)})));return function(e,r){return s.apply(this,arguments)}}()}(r,s))}}}))((function(e){var r=e.sendOrder,s=(0,t.v9)(p.eW),i=(0,c.s0)(),d=(0,n.useRef)(null),b=(0,n.useMemo)((0,o.bI)(i),[]),w=(0,m.cI)(),M=w.register,F=w.handleSubmit,E=w.formState.errors;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("form",{className:"details",id:u,onSubmit:F((function(){var e=new FormData(d.current);e.append("setNumber",s),e&&r(b,e)})),ref:d,children:[(0,a.jsx)("h1",{className:"fromLeft",children:"Shipping details"}),(0,a.jsx)("div",{className:"foo",id:"foo"}),(0,a.jsxs)("div",{className:"form-item extendable",children:[(0,a.jsx)("label",{className:"required",htmlFor:"firstName",children:"Name"}),(0,a.jsx)("input",(0,l.Z)((0,l.Z)({type:"text"},M("firstName",L.firstName)),{},{id:"firstName"})),E.firstName&&"required"===E.firstName.type&&(0,a.jsx)("span",{children:f}),E.firstName&&"minLength"===E.firstName.type&&(0,a.jsxs)("span",{children:[h,y.minLength]}),E.firstName&&"maxLength"===E.firstName.type&&(0,a.jsxs)("span",{children:[x,y.maxLength]}),E.firstName&&"pattern"===E.firstName.type&&(0,a.jsx)("span",{children:j})]}),(0,a.jsxs)("div",{className:"form-item extendable",children:[(0,a.jsx)("label",{className:"required",htmlFor:"Surname",children:"Surname"}),(0,a.jsx)("input",(0,l.Z)({id:"Surname",type:"text"},M("surName",L.surName))),E.surName&&"required"===E.surName.type&&(0,a.jsxs)("span",{children:[f,g.required]}),E.surName&&"minLength"===E.surName.type&&(0,a.jsxs)("span",{children:[h,g.minLength]}),E.surName&&"maxLength"===E.surName.type&&(0,a.jsxs)("span",{children:[x,g.maxLength]}),E.surName&&"pattern"===E.surName.type&&(0,a.jsx)("span",{children:j})]}),(0,a.jsxs)("div",{className:"form-item full-width",children:[(0,a.jsx)("label",{className:"required",htmlFor:"Phone",children:"Phone Number"}),(0,a.jsx)("input",(0,l.Z)({id:"Phone",placeholder:"Mobile or regular Polish phone with country code like 048 669086566",type:"text"},M("phone",L.phone))),E.phone&&"required"===E.phone.type&&(0,a.jsxs)("span",{children:[f,N.required]}),E.phone&&"pattern"===E.phone.type&&(0,a.jsx)("span",{children:j})]}),(0,a.jsxs)("div",{className:"form-item full-width",children:[(0,a.jsx)("label",{className:"required",htmlFor:"email",children:"Email"}),(0,a.jsx)("input",(0,l.Z)({id:"email",type:"text"},M("email",L.email))),E.email&&"required"===E.email.type&&(0,a.jsxs)("span",{children:[f,v.required]}),E.email&&"pattern"===E.email.type&&(0,a.jsx)("span",{children:j})]}),(0,a.jsxs)("div",{className:"form-item full-width",children:[(0,a.jsx)("label",{htmlFor:"DoB",children:"Date of Birth"}),(0,a.jsx)("input",(0,l.Z)({id:"DoB",placeholder:"Date in yyyy-mm-dd or yyyy-m-dd format ",type:"text"},M("dob",L.dob))),E.dob&&"pattern"===E.dob.type&&(0,a.jsx)("span",{children:j})]}),(0,a.jsxs)("div",{className:"form-item full-width",children:[(0,a.jsx)("label",{className:"required",htmlFor:"address",children:"Address"}),(0,a.jsx)("input",(0,l.Z)({type:"text",id:"address"},M("address",L.address))),E.address&&"required"===E.address.type&&(0,a.jsxs)("span",{children:[f,q.required]}),E.address&&"pattern"===E.address.type&&(0,a.jsx)("span",{children:j})]}),(0,a.jsxs)("div",{className:"form-item full-width",children:[(0,a.jsx)("label",{className:"required",htmlFor:"city",children:"City"}),(0,a.jsx)("input",(0,l.Z)({type:"text",id:"city"},M("city",L.city))),E.city&&"required"===E.city.type&&(0,a.jsxs)("span",{children:[f,_.required]}),E.city&&"pattern"===E.city.type&&(0,a.jsx)("span",{children:j}),E.city&&"minLength"===E.city.type&&(0,a.jsxs)("span",{children:[h,Z.minLength]})]}),(0,a.jsxs)("div",{className:"form-item",children:[(0,a.jsx)("label",{className:"required",htmlFor:"state",children:"State"}),(0,a.jsx)("input",(0,l.Z)({type:"text",id:"state"},M("state",L.state))),E.state&&"required"===E.state.type&&(0,a.jsxs)("span",{children:[f,_.required]}),E.state&&"pattern"===E.state.type&&(0,a.jsx)("span",{children:j}),E.state&&"minLength"===E.state.type&&(0,a.jsxs)("span",{children:[h,_.minLength]})]}),(0,a.jsxs)("div",{className:"form-item",children:[(0,a.jsx)("label",{className:"required",htmlFor:"ZipCode",children:"Zip Code"}),(0,a.jsx)("input",(0,l.Z)({id:"ZipCode",type:"text",placeholder:" zip code in format xx-xxx"},M("zip",L.zip))),E.zip&&"required"===E.zip.type&&(0,a.jsxs)("span",{children:[f,z.required]}),E.zip&&"pattern"===E.zip.type&&(0,a.jsx)("span",{children:j})]})]})})})),k=function(e){var r=e.data,s=e.loadHandler;return(0,a.jsxs)("div",{className:"part",children:[(0,a.jsx)("img",{className:"part__image",src:r.part.part_img_url,alt:"Picture of "+r.part.name,onLoad:s,onError:s}),(0,a.jsxs)("div",{className:"part__text-items",children:[(0,a.jsx)("div",{className:"part__item part__name",children:r.part.name}),(0,a.jsx)("a",{className:"part__item part__code",href:r.part.part_img_url,target:"blank",children:r.part.part_num})]})]})},C=s(6666),$=s.n(C),T=s(763),D=s(1092),A=s(9874),P=function(){var e=(0,t.v9)(p.eW),r=(0,A.B)(e,{skip:(0,o.s9)()}),s=r.data,i=r.isFetching,l=r.isError,m=(0,n.useRef)(null),c=s?(0,T.after)(s.length,(function(){var e;null===(e=m.current)||void 0===e||e.classList.add("active")})):function(){};return i?(0,a.jsx)(D.TF,{}):l?(0,a.jsx)(d,{}):s&&!(0,T.isEmpty)(s)?(0,a.jsx)("div",{className:"parts",ref:m,children:s.map((function(e){return(0,a.jsx)(k,{data:e,loadHandler:c},$()())}))}):(0,a.jsx)(d,{})},B=function(){var e=(0,t.v9)(p.jX),r=e.name,s=e.num_parts,i=e.set_img_url,n="There are ".concat(s," parts in this minifig:");return(0,a.jsxs)("div",{className:"summary__main items",children:[(0,a.jsx)("h2",{className:"black fromLeft",children:"Summary"}),(0,a.jsxs)("div",{className:"minifigCard minifigCard--no-padding",children:[r&&i&&(0,a.jsx)(D.t,{name:r,url:i}),r&&(0,a.jsx)(D.VG,{text:r})]}),s&&(0,a.jsx)("p",{children:n})]})},I=function(){return(0,a.jsxs)("div",{className:"summary",children:[(0,a.jsx)(B,{}),(0,a.jsx)(P,{}),(0,a.jsx)(D.kD,{className:"button uppercased",type:"submit",form:u,children:"Submit"})]})},O=function(e){var r=e.isMessage,s=e.message;return(0,o.s9)()?(0,a.jsx)(i,{message:"No Internet Connection, try again some later"}):(0,a.jsxs)("main",{className:"order",children:[(0,a.jsx)(S,{}),(0,a.jsx)(I,{}),r&&(0,a.jsx)(i,{message:s})]})},H=(0,t.$j)((function(e){return{message:e.fetch.anyMessage,isMessage:e.fetch.isMessage}}),{})(O)}}]);
//# sourceMappingURL=489.f75eadaf.chunk.js.map